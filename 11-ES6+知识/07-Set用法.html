<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Set用法</title>
    <style></style>
  </head>
  <body>
    <script>
      // 2024-05-18
      // Set用法： Set是ES6新增的一种数据结构用来保存数据， 类似于数组，
      // 和数组不同的点是， Set中的元素不能重复，Set常用的一个点就是可以给数组去重
      // 创建Set需要通过构造函数，暂时不支持通过字面量形式创建
      const set1 = new Set()
      set1.add(10)
      set1.add(20)
      set1.add(30)
      console.log(set1)

      const set2 = new Set([22, 33, 44, 22])
      console.log(set2)

      const arr = [1, 3, 4, 5, 3]
      const newArr = []
      for (const item of arr) {
        if (!newArr.includes(item)) {
          newArr.push(item)
        }
      }
      console.log("去重后的数组:", newArr)
      const set3 = new Set(arr)
      const newArr1 = [ ...set3]
      const newArr2 = Array.from(set3)
      console.log(set3, newArr1, newArr2)

      // Set 常用的方法
      // 1. size 返回Set的元素个数
      // 2. add() 添加元素
      // 3. delete()
      // 4. clear()
      // 5. has() set中是否存在这个元素
      // 6.forEach() 通过forEach遍历Set
      // Set 是支持for of 遍历的

      // set3.forEach((item) => {
      //   console.log("set3Item: ", item)
      // })

      // for (const item of set2) {
      //   console.log("forof-set2Item:", item)
      // }

      // 二. WeakSet
      // WeakSet跟Set的区别
      // 1. WeakSet只能存放对象类型的数据，不能存放基本数据类型
      // 2. WeakSet对元素的引用是弱引用，如果没有其他引用对某个对象进行引用，那么GC会对其进行回收
      // 3. 常用方法add、delete、has，
      // 4. WeakSet不能遍历，因为WeakSet是对对象弱引用，如果变量其中的元素，可能对导致对象不能正常销毁，
      //所以存储到WeakSet中的对象是不能获取

      let obj1 = {
        name: "xionglp",
        age: 17
      }
      let obj2 = {
        name: "xjz",
        age: 2
      }
      let obj3 = {
        name: "liushuang",
        age: 18
      }
      // const tempSet = new Set([obj1, obj2])
      // console.log(tempSet)
      const weakSet1 = new WeakSet([obj1, obj2, obj3])
      console.log(weakSet1)

    </script>
  </body>
</html>